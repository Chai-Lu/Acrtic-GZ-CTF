/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import{t as e}from"./kocdnk2i.js";import{t}from"./nu4jnu0f.js";import{t as n}from"./nugqs812.js";import{t as r}from"./gjb4rijj.js";import"./dut9ujr7.js";import{t as i}from"./h0nb8b87.js";import{Ca as a,Cr as o,In as s,O as c,Oa as l,Pn as u,Vr as d,W as f,ar as p,dr as m,ha as h,q as g,qn as _,qr as v,sr as y,wr as b,x}from"./index.hrqptwjo.js";import{t as S}from"./lpdh7ltc.js";import{n as C,t as w}from"./k91mi8w4.js";import{t as T}from"./o7hpfmlv.js";import{t as E}from"./pbjgqd5h.js";var D=l(c(),1),O=l(a(),1),k=l(h(),1),A=()=>{let[a,c]=t(``),[l,h]=t(``),[A,j]=t(``),[M,N]=t(``),[P,F]=(0,O.useState)(!1),{config:I}=u(),L=y(),{captchaRef:R,getToken:z,cleanUp:B}=C(),{t:V}=m(),H=new Map([[_.LoggedIn,{message:V(`account.notification.register.logged_in`)}],[_.AdminConfirmationRequired,{title:V(`account.notification.register.request_sent.title`),message:V(`account.notification.register.request_sent.message`)}],[_.EmailConfirmationRequired,{title:V(`common.email.sent.title`),message:V(`common.email.sent.message`)}],[void 0,void 0]]);e(V(`account.title.register`));let U=async e=>{if(e.preventDefault(),a!==l){o({color:`red`,title:V(`common.error.check_input`),message:V(`account.password.not_match`),icon:(0,k.jsx)(D.Icon,{path:g,size:1})});return}let{valid:t,token:n}=await z();if(!t){o({color:`orange`,title:V(`account.notification.captcha.not_valid`),message:V(`common.error.try_later`),loading:!0});return}F(!0),o({color:`orange`,id:`register-status`,title:V(`account.notification.captcha.request_sent.title`),message:V(`account.notification.captcha.request_sent.message`),loading:!0,autoClose:!1});try{let e=await s.account.accountRegister({userName:A,password:await T(V,a,I.apiPublicKey),email:M,challenge:n}),t=H.get(e.data.data);t&&(b({id:`register-status`,color:`teal`,title:t.title,message:t.message,icon:(0,k.jsx)(D.Icon,{path:f,size:1}),loading:!1,autoClose:!0}),B(!0),e.data.data===_.LoggedIn?L(`/`):L(`/account/login`))}catch(e){let{title:t,message:n}=x(e,V);b({id:`register-status`,color:`red`,title:t,message:n,icon:(0,k.jsx)(D.Icon,{path:g,size:1}),loading:!1,autoClose:!0}),B(!1)}finally{F(!1)}};return(0,k.jsxs)(S,{onSubmit:U,children:[(0,k.jsx)(i,{required:!0,label:V(`account.label.email`),type:`email`,placeholder:`ctf@example.com`,w:`100%`,value:M,disabled:P,onChange:e=>N(e.currentTarget.value)}),(0,k.jsx)(i,{required:!0,label:V(`account.label.username`),type:`text`,placeholder:`ctfer`,w:`100%`,value:A,disabled:P,onChange:e=>j(e.currentTarget.value)}),(0,k.jsx)(E,{value:a,onChange:e=>c(e.currentTarget.value),disabled:P}),(0,k.jsx)(r,{required:!0,label:V(`account.label.password_retype`),value:l,onChange:e=>h(e.currentTarget.value),disabled:P,w:`100%`,error:a!==l}),(0,k.jsx)(w,{action:`register`,ref:R}),(0,k.jsx)(v,{fz:`xs`,className:n.alignSelfEnd,component:p,to:`/account/login`,children:V(`account.anchor.login`)}),(0,k.jsx)(d,{type:`submit`,fullWidth:!0,onClick:U,disabled:P,children:V(`account.button.register`)})]})};export{A as default};