/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import"./lcut4z52.js";import"./cbxtepre.js";import{u as e}from"./isy1dskq.js";import{t}from"./cdbutviq.js";import"./kocdnk2i.js";import{t as n}from"./nu4jnu0f.js";import{t as r}from"./j0saofxo.js";import{t as i}from"./lquea752.js";import{t as a}from"./nugqs812.js";import{t as o}from"./dut9ujr7.js";import{t as s}from"./o417b45d.js";import{t as c}from"./h0nb8b87.js";import{t as l}from"./lj7msjkh.js";import{$r as u,Br as d,Ca as f,Cr as p,Gi as m,In as h,Ir as g,Jr as _,Li as v,Lr as y,Mi as b,Nr as x,O as S,Oa as C,Or as w,Pi as T,Ri as ee,Rr as E,Ti as D,Tr as O,Un as k,Vr as A,W as j,Xi as M,ar as N,b as P,ca as te,cr as F,di as I,dr as L,gi as ne,ha as R,ji as re,jr as z,ki as B,kn as V,la as H,li as U,pa as ie,q as W,rn as ae,sa as oe,ta as se,tt as ce,wi as G,yi as le,zn as ue,zr as K}from"./index.hrqptwjo.js";import"./iwhjrhtg.js";import"./mdazlrzp.js";import"./mbfygvvk.js";import{t as q}from"./gtptignr.js";import"./lvtgxs0o.js";import{t as J}from"./o4secb0i.js";import{t as de}from"./qo69arss.js";var Y=C(f(),1),X=C(R(),1),[fe,pe]=ie();function me(e){let{value:t,defaultValue:n,onChange:r,multiple:i,children:a}=re(`ChipGroup`,null,e),[o,s]=M({value:t,defaultValue:n,finalValue:i?[]:null,onChange:r});return(0,X.jsx)(fe,{value:{isChipSelected:e=>Array.isArray(o)?o.includes(e):e===o,onChange:e=>{let t=e.currentTarget.value;s(Array.isArray(o)?o.includes(t)?o.filter(e=>e!==t):[...o,t]:t)},multiple:i},children:a})}me.displayName=`@mantine/core/ChipGroup`;var he={root:`m_f59ffda3`,label:`m_be049a53`,"label--outline":`m_3904c1af`,"label--filled":`m_fa109255`,"label--light":`m_f7e165c3`,iconWrapper:`m_9ac86df9`,checkIcon:`m_d6d72580`,input:`m_bde07329`},ge={type:`checkbox`},_e=m((e,{size:t,radius:n,variant:r,color:i,autoContrast:a})=>{let o=e.variantColorResolver({color:i||e.primaryColor,theme:e,variant:r||`filled`,autoContrast:a});return{root:{"--chip-fz":oe(t),"--chip-size":H(t,`chip-size`),"--chip-radius":n===void 0?void 0:te(n),"--chip-checked-padding":H(t,`chip-checked-padding`),"--chip-padding":H(t,`chip-padding`),"--chip-icon-size":H(t,`chip-icon-size`),"--chip-bg":i||r?o.background:void 0,"--chip-hover":i||r?o.hover:void 0,"--chip-color":i||r?o.color:void 0,"--chip-bd":i||r?o.border:void 0,"--chip-spacing":H(t,`chip-spacing`)}}}),Z=G((t,n)=>{let r=re(`Chip`,ge,t),{classNames:i,className:a,style:o,styles:s,unstyled:c,vars:l,id:u,checked:d,defaultChecked:f,onChange:p,value:m,wrapperProps:h,type:g,disabled:_,children:v,size:y,variant:b,icon:x,rootRef:S,autoContrast:C,mod:w,attributes:ee,...E}=r,O=T({name:`Chip`,classes:he,props:r,className:a,style:o,classNames:i,styles:s,unstyled:c,attributes:ee,vars:l,varsResolver:_e}),k=pe(),A=se(u),{styleProps:j,rest:N}=B(E),[P,te]=M({value:d,defaultValue:f,finalValue:!1,onChange:p}),F=k?{checked:k.isChipSelected(m),onChange:e=>{k.onChange(e),p?.(e.currentTarget.checked)},type:k.multiple?`checkbox`:`radio`}:{},I=F.checked||P;return(0,X.jsxs)(D,{size:y,variant:b,ref:S,mod:w,...O(`root`),...j,...h,children:[(0,X.jsx)(`input`,{type:g,...O(`input`),checked:I,onChange:e=>te(e.currentTarget.checked),id:A,disabled:_,ref:n,value:m,...F,...N}),(0,X.jsxs)(`label`,{htmlFor:A,"data-checked":I||void 0,"data-disabled":_||void 0,...O(`label`,{variant:b||`filled`}),children:[I&&x!==null&&x!==!1&&(0,X.jsx)(`span`,{...O(`iconWrapper`),children:x===void 0?(0,X.jsx)(e,{...O(`checkIcon`)}):x}),(0,X.jsx)(`span`,{children:v})]})]})});Z.classes=he,Z.displayName=`@mantine/core/Chip`,Z.Group=me;var ve=C(S());const ye=e=>{let{id:t,chalId:n}=F(),[r,i]=[parseInt(t??`-1`),parseInt(n??`-1`)],[o,s]=(0,Y.useState)(!1),{mutate:c}=J(r,i),[l,u]=(0,Y.useState)(``),[d,f]=(0,Y.useState)([]),{t:m}=L();(0,Y.useEffect)(()=>{let e=[];l.split(`
`).forEach(t=>{let n=t.split(` `);n=n.length===1?t.split(`	`):n,n.length===2&&e.push({flag:n[0],attachmentType:k.Remote,remoteUrl:n[1]})}),f(e)},[l]);let g=async()=>{if(!(d.length<=0))try{await h.edit.editAddFlags(r,i,d),p({color:`teal`,message:m(`admin.notification.games.challenges.attachment.updated`),icon:(0,X.jsx)(ve.Icon,{path:j,size:1})}),u(``),c(),e.onClose()}catch(e){P(e,m)}finally{s(!1)}};return(0,X.jsx)(x,{...e,children:(0,X.jsxs)(z,{children:[(0,X.jsxs)(_,{children:[m(`admin.content.games.challenges.attachment.instruction.remote.content`),(0,X.jsx)(`br`,{}),(0,X.jsx)(_,{fw:`bold`,span:!0,children:m(`admin.content.games.challenges.attachment.instruction.remote.format`)}),(0,X.jsx)(`br`,{}),(0,X.jsx)(_,{fw:`bold`,c:`orange`,span:!0,children:m(`admin.content.games.challenges.attachment.instruction.amount_double`)}),(0,X.jsx)(`br`,{})]}),(0,X.jsx)(y,{required:!0,autosize:!0,minRows:8,maxRows:12,value:l,classNames:{input:a.ffmono},onChange:e=>u(e.target.value),placeholder:`flag{hello_world} http://example.com/1.zip
flag{he11o_world} http://example.com/2.zip`}),(0,X.jsx)(A,{fullWidth:!0,disabled:o,onClick:g,children:m(`admin.button.games.challenges.attachment.batch_add`)})]})})};var Q=C(S());const be=e=>{let{id:t,chalId:n}=F(),[a,s]=[parseInt(t??`-1`),parseInt(n??`-1`)],c=`DYN_ATTACHMENT_${s}`,[l,u]=(0,Y.useState)(!1),{mutate:f}=J(a,s),[m,g]=(0,Y.useState)(0),[y,S]=(0,Y.useState)([]),C=v(),{colorScheme:T}=b(),{t:E}=L(),D=async()=>{if(y.length<=0){p({color:`red`,message:E(`admin.notification.games.challenges.attachment.no_selected`),icon:(0,X.jsx)(Q.Icon,{path:W,size:1})});return}g(0),u(!0);try{let t=await h.assets.assetsUpload({files:y},{filename:c},{onUploadProgress:e=>{g(e.loaded/(e.total??1)*90)}});g(95),t.data&&(await h.edit.editAddFlags(a,s,t.data.map((e,t)=>({flag:y[t].name,attachmentType:k.Local,fileHash:e.hash}))),g(0),p({color:`teal`,message:E(`admin.notification.games.challenges.attachment.updated`),icon:(0,X.jsx)(Q.Icon,{path:j,size:1})}),S([]),f(),e.onClose())}catch(e){P(e,E)}finally{u(!1)}};return(0,X.jsx)(x,{...e,children:(0,X.jsxs)(z,{children:[(0,X.jsxs)(_,{size:`sm`,children:[E(`admin.content.games.challenges.attachment.instruction.dynamic.content`),(0,X.jsx)(`br`,{}),(0,X.jsx)(_,{fw:`bold`,span:!0,children:E(`admin.content.games.challenges.attachment.instruction.dynamic.format`)}),(0,X.jsx)(`br`,{}),(0,X.jsx)(_,{fw:`bold`,c:`orange`,span:!0,children:E(`admin.content.games.challenges.attachment.instruction.amount_double`)}),(0,X.jsx)(`br`,{})]}),(0,X.jsx)(le,{offsetScrollbars:!0,h:`40vh`,pos:`relative`,children:y.length===0?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ne,{opacity:.3,color:T===`dark`?`black`:`white`}),(0,X.jsx)(d,{h:`calc(40vh - 20px)`,children:(0,X.jsxs)(z,{gap:0,children:[(0,X.jsx)(w,{order:2,children:E(`admin.placeholder.games.challenges.attachment.no_file_selected.title`)}),(0,X.jsx)(_,{children:E(`admin.placeholder.games.challenges.attachment.no_file_selected.comment`)})]})})]}):(0,X.jsx)(z,{gap:`xs`,children:y.map(e=>(0,X.jsx)(r,{p:4,children:(0,X.jsxs)(U,{justify:`space-between`,children:[(0,X.jsx)(_,{lineClamp:1,ff:`monospace`,children:e.name}),(0,X.jsx)(I,{onClick:()=>S(y.filter(t=>t!==e)),children:(0,X.jsx)(Q.Icon,{path:W,size:1})})]})},e.name))})}),(0,X.jsxs)(U,{grow:!0,children:[(0,X.jsx)(i,{multiple:!0,onChange:S,children:e=>(0,X.jsx)(A,{...e,disabled:l,children:E(`common.button.select_file`)})}),(0,X.jsxs)(A,{className:q.button,disabled:l||y.length<1,onClick:D,color:m===0?C.primaryColor:`cyan`,children:[(0,X.jsx)(`div`,{className:q.label,children:E(m===0?`admin.button.challenges.flag.add.dynamic`:`common.button.uploading`)}),m!==0&&(0,X.jsx)(o,{value:m,className:q.progress,color:ee(C.colors[C.primaryColor][2],.35),radius:`sm`})]})]})]})})};var xe=C(S());const Se=e=>{let[t,r]=(0,Y.useState)(!1),{id:i,chalId:o}=F(),[s,c]=[parseInt(i??`-1`),parseInt(o??`-1`)],[u,d]=n(``),{challenge:f,mutate:m}=J(s,c),{t:g}=L(),v=async()=>{if(!u)return;let t=u.split(`
`).filter(e=>e.trim().length>0).map(e=>({flag:e}));r(!0);try{await h.edit.editAddFlags(s,c,t),p({color:`teal`,message:g(`admin.notification.games.challenges.flag.created`),icon:(0,X.jsx)(xe.Icon,{path:j,size:1})}),f&&m({...f,flags:[...f.flags??[],...t]}),d(``),e.onClose()}catch(e){P(e,g)}finally{r(!1)}};return(0,X.jsx)(x,{...e,children:(0,X.jsxs)(z,{children:[(0,X.jsx)(_,{size:`sm`,children:(0,X.jsx)(l,{i18nKey:`admin.content.games.challenges.flag.create`})}),(0,X.jsx)(y,{w:`100%`,value:u,disabled:t,autosize:!0,minRows:8,maxRows:8,onChange:d,classNames:{input:a.ffmono}}),(0,X.jsx)(U,{grow:!0,m:`auto`,w:`100%`,children:(0,X.jsx)(A,{fullWidth:!0,disabled:t,onClick:v,children:g(`admin.button.challenges.flag.add.normal`)})})]})})};var Ce=C(S()),we=({flag:e,onDelete:n,unifiedAttachment:i})=>{let a=t(),o=i??e.attachment,s=o?.url?.split(`/`).slice(-2)[0].slice(0,8),{classes:c}=V({fw:`bold`,ff:`monospace`,cs:`pointer`}),{t:l}=L();return(0,X.jsx)(r,{p:`sm`,children:(0,X.jsxs)(U,{wrap:`nowrap`,justify:`space-between`,gap:3,children:[(0,X.jsxs)(z,{align:`flex-start`,gap:0,w:`100%`,children:[(0,X.jsx)(u,{variant:`unstyled`,value:e.flag,w:`100%`,size:`md`,readOnly:!0,onClick:()=>{a.copy(e.flag),p({message:l(`admin.notification.games.challenges.flag.copied`),color:`teal`,icon:(0,X.jsx)(Ce.Icon,{path:j,size:1})})},classNames:c}),(0,X.jsxs)(_,{c:`dimmed`,size:`sm`,ff:`monospace`,children:[o?.type,` `,s]})]}),(0,X.jsx)(I,{onClick:n,color:`red`,children:(0,X.jsx)(Ce.Icon,{path:ce,size:1})})]})})};const Te=({flags:e,onDelete:t,unifiedAttachment:n})=>(0,X.jsx)(z,{children:(0,X.jsx)(s,{spacing:`sm`,cols:{base:2,w18:3,w24:4,w30:5,w36:6,w42:7,w48:8},children:e&&e.map((e,r)=>(0,X.jsx)(we,{flag:e,onDelete:()=>t(e),unifiedAttachment:n},r))})});var $=C(S(),1),Ee=({onDelete:e})=>{let{id:t,chalId:n}=F(),[r,s]=[parseInt(t??`-1`),parseInt(n??`-1`)],{challenge:f,mutate:m}=J(r,s),[y,x]=(0,Y.useState)(!1),[S,C]=(0,Y.useState)(f?.attachment?.type??k.None),[T,D]=(0,Y.useState)(f?.attachment?.url??``),[M,N]=(0,Y.useState)(f?.flagTemplate??``),te=O(),{colorScheme:I}=b(),{t:R}=L();(0,Y.useEffect)(()=>{f&&(C(f.attachment?.type??k.None),D(f.attachment?.url??``),N(f.flagTemplate??``))},[f]);let re=async()=>{x(!0);try{await h.edit.editUpdateAttachment(r,s,{attachmentType:k.None}),p({color:`teal`,message:R(`admin.notification.games.challenges.attachment.updated`),icon:(0,X.jsx)($.Icon,{path:j,size:1})}),C(k.None),f&&m({...f,attachment:null})}catch(e){P(e,R)}finally{x(!1)}},B=v(),[V,H]=(0,Y.useState)(0),[ie,W]=(0,Y.useState)(!1),ae=new Map([[k.None,R(`challenge.file_type.none`)],[k.Remote,R(`challenge.file_type.remote`)],[k.Local,R(`challenge.file_type.local`)]]),oe=async e=>{if(e){H(0),x(!0);try{let t=(await h.assets.assetsUpload({files:[e]},void 0,{onUploadProgress:e=>{H(e.loaded/(e.total??1)*90)}})).data[0];H(95),t&&(await h.edit.editUpdateAttachment(r,s,{attachmentType:k.Local,fileHash:t.hash}),H(0),x(!1),m(),p({color:`teal`,message:R(`admin.notification.games.challenges.attachment.updated`),icon:(0,X.jsx)($.Icon,{path:j,size:1})}))}catch(e){P(e,R)}finally{x(!1)}}},se=async()=>{if(T.startsWith(`http`)){x(!0);try{await h.edit.editUpdateAttachment(r,s,{attachmentType:k.Remote,remoteUrl:T}),p({color:`teal`,message:R(`admin.notification.games.challenges.attachment.updated`),icon:(0,X.jsx)($.Icon,{path:j,size:1})})}catch(e){P(e,R)}finally{x(!1)}}},ce=async()=>{if(M!==f?.flagTemplate){x(!0);try{await h.edit.editUpdateGameChallenge(r,s,{flagTemplate:M}),p({color:`teal`,message:R(`admin.notification.games.challenges.flag_template.updated`),icon:(0,X.jsx)($.Icon,{path:j,size:1})}),f&&m({...f,flagTemplate:M})}catch(e){P(e,R)}finally{x(!1)}}},G=(0,X.jsxs)(X.Fragment,{children:[`\xA0`,R(`admin.content.games.challenges.flag.instructions.will_generate`),`\xA0`]});return(0,X.jsxs)(z,{children:[(0,X.jsxs)(U,{justify:`space-between`,wrap:`nowrap`,mt:`md`,children:[(0,X.jsx)(w,{order:2,children:R(`admin.content.games.challenges.attachment.title`)}),S===k.Remote?(0,X.jsx)(A,{disabled:y,w:`122px`,onClick:se,children:R(`admin.button.challenges.attachment.save_url`)}):(0,X.jsx)(i,{onChange:oe,children:e=>(0,X.jsxs)(A,{...e,fullWidth:!0,className:q.button,disabled:S!==k.Local,w:`122px`,color:V===0?B.primaryColor:`cyan`,children:[(0,X.jsx)(`div`,{className:q.label,children:R(V===0?`admin.button.challenges.attachment.upload`:`admin.button.challenges.attachment.uploading`)}),V!==0&&(0,X.jsx)(o,{value:V,className:q.progress,color:ee(B.colors[B.primaryColor][2],.35),radius:`sm`})]})})]}),(0,X.jsx)(E,{}),(0,X.jsxs)(U,{justify:`space-between`,wrap:`nowrap`,children:[(0,X.jsx)(u.Wrapper,{label:R(`admin.content.games.challenges.attachment.type`),required:!0,children:(0,X.jsx)(Z.Group,{value:S,onChange:e=>{e===k.None?te.openConfirmModal({title:R(`admin.content.games.challenges.attachment.clear.title`),children:(0,X.jsx)(_,{size:`sm`,children:R(`admin.content.games.challenges.attachment.clear.description`)}),onConfirm:re,confirmProps:{color:`orange`}}):C(e)},children:(0,X.jsx)(U,{justify:`left`,gap:`sm`,h:`2.25rem`,wrap:`nowrap`,children:Object.entries(k).map(e=>(0,X.jsx)(Z,{value:e[1],size:`sm`,children:ae.get(e[1])},e[0]))})})}),S===k.Remote?(0,X.jsx)(c,{label:R(`admin.content.games.challenges.attachment.link`),disabled:y,value:T,w:`calc(100% - 400px)`,classNames:{input:q.hover},onChange:e=>D(e.target.value)}):(0,X.jsx)(c,{label:R(`admin.content.games.challenges.attachment.link`),readOnly:!0,disabled:y||S===k.None,value:f?.attachment?.url??``,w:`calc(100% - 400px)`,classNames:{input:q.hover},onClick:()=>f?.attachment?.url&&window.open(f?.attachment?.url,`_blank`)})]}),(0,X.jsxs)(U,{justify:`space-between`,mt:`md`,children:[(0,X.jsx)(w,{order:2,children:R(`admin.content.games.challenges.flag.title`)}),f?.type===ue.DynamicContainer?(0,X.jsx)(A,{disabled:y,onClick:ce,children:R(`admin.button.challenges.flag.save`)}):(0,X.jsx)(A,{disabled:y,w:`122px`,onClick:()=>W(!0),children:R(`admin.button.challenges.flag.add.normal`)})]}),(0,X.jsx)(E,{}),f?.type===ue.DynamicContainer?(0,X.jsxs)(z,{children:[(0,X.jsx)(c,{label:R(`admin.content.games.challenges.flag.template`),size:`sm`,value:M,placeholder:`flag{[GUID]}`,onChange:e=>N(e.target.value),classNames:{input:a.ffmono}}),(0,X.jsxs)(z,{mah:`400px`,gap:2,pb:8,children:[(0,X.jsx)(_,{size:`md`,fw:`bold`,children:R(`admin.content.games.challenges.flag.instructions.description`)}),(0,X.jsxs)(g,{size:`sm`,spacing:2,children:[(0,X.jsx)(g.Item,{children:(0,X.jsxs)(l,{i18nKey:`admin.content.games.challenges.flag.instructions.guid`,children:[`_`,(0,X.jsx)(K,{children:`_`}),`_`]})}),(0,X.jsx)(g.Item,{children:(0,X.jsxs)(l,{i18nKey:`admin.content.games.challenges.flag.instructions.team_hash`,children:[`_`,(0,X.jsx)(K,{children:`_`}),`_`]})}),(0,X.jsx)(g.Item,{children:(0,X.jsxs)(l,{i18nKey:`admin.content.games.challenges.flag.instructions.leet`,children:[`_`,(0,X.jsx)(K,{children:`_`}),`_`]})}),(0,X.jsx)(g.Item,{children:(0,X.jsxs)(l,{i18nKey:`admin.content.games.challenges.flag.instructions.both`,children:[`_`,(0,X.jsx)(K,{children:`_`}),(0,X.jsx)(K,{children:`_`}),`_`]})}),(0,X.jsx)(g.Item,{children:(0,X.jsxs)(l,{i18nKey:`admin.content.games.challenges.flag.instructions.complex`,children:[`_`,(0,X.jsx)(K,{children:`_`}),(0,X.jsx)(K,{children:`_`}),`_`]})})]}),(0,X.jsx)(_,{size:`md`,fw:`bold`,children:R(`admin.content.games.challenges.flag.instructions.example`)}),(0,X.jsxs)(g,{size:`sm`,spacing:2,children:[(0,X.jsxs)(g.Item,{children:[R(`admin.content.games.challenges.flag.instructions.leave_empty`),G,(0,X.jsx)(K,{children:`flag{1bab71b8-117f-4dea-a047-340b72101d7b}`})]}),(0,X.jsxs)(g.Item,{children:[(0,X.jsx)(K,{children:`flag{hello world}`}),G,(0,X.jsx)(K,{children:`flag{He1lo_w0r1d}`})]}),(0,X.jsxs)(g.Item,{children:[(0,X.jsx)(K,{children:`[CLEET]flag{hello sara}`}),G,(0,X.jsx)(K,{children:`flag{He1!o_$@rA}`})]}),(0,X.jsxs)(g.Item,{children:[(0,X.jsx)(K,{children:`flag{hello_world_[TEAM_HASH]}`}),G,(0,X.jsx)(K,{children:`flag{hello_world_5418ce4d815c}`})]}),(0,X.jsxs)(g.Item,{children:[(0,X.jsx)(K,{children:`[LEET]flag{hello world [TEAM_HASH]}`}),G,(0,X.jsx)(K,{children:`flag{He1lo_w0r1d_5418ce4d815c}`})]})]})]})]}):(0,X.jsxs)(le,{h:`calc(100vh - 32rem)`,pos:`relative`,children:[!f?.flags.length&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ne,{opacity:.3,color:I===`dark`?`black`:`white`}),(0,X.jsx)(d,{h:`calc(100vh - 32rem)`,children:(0,X.jsxs)(z,{gap:0,children:[(0,X.jsx)(w,{order:2,children:R(`admin.content.games.challenges.flag.empty.title`)}),(0,X.jsx)(_,{children:R(`admin.content.games.challenges.flag.empty.description`)})]})})]}),(0,X.jsx)(Te,{flags:f?.flags,onDelete:e,unifiedAttachment:f?.attachment})]}),(0,X.jsx)(Se,{title:R(`admin.button.challenges.flag.add.normal`),opened:ie,onClose:()=>W(!1)})]})},De=({onDelete:e})=>{let{id:t,chalId:n}=F(),[r,i]=[parseInt(t??`-1`),parseInt(n??`-1`)],{challenge:a}=J(r,i),[o,s]=(0,Y.useState)(!1),[c,l]=(0,Y.useState)(!1),{colorScheme:u}=b(),{t:f}=L();return(0,X.jsxs)(z,{children:[(0,X.jsxs)(U,{justify:`space-between`,mt:`md`,children:[(0,X.jsx)(w,{order:2,children:f(`admin.content.games.challenges.flag.title`)}),(0,X.jsxs)(U,{justify:`right`,children:[(0,X.jsx)(A,{onClick:()=>l(!0),children:f(`admin.button.challenges.flag.add.remote`)}),(0,X.jsx)(A,{onClick:()=>s(!0),children:f(`admin.button.challenges.flag.add.dynamic`)})]})]}),(0,X.jsx)(E,{}),(0,X.jsxs)(le,{h:`calc(100vh - 25rem)`,pos:`relative`,children:[!a?.flags.length&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ne,{opacity:.3,color:u===`dark`?`black`:`white`}),(0,X.jsx)(d,{h:`calc(100vh - 25rem)`,children:(0,X.jsxs)(z,{gap:0,children:[(0,X.jsx)(w,{order:2,children:f(`admin.content.games.challenges.flag.empty.title`)}),(0,X.jsx)(_,{children:f(`admin.content.games.challenges.flag.empty.description`)})]})})]}),(0,X.jsx)(Te,{flags:a?.flags,onDelete:e})]}),(0,X.jsx)(be,{title:f(`admin.button.challenges.flag.add.dynamic`),size:`40%`,opened:o,onClose:()=>s(!1)}),(0,X.jsx)(ye,{title:f(`admin.button.challenges.flag.add.remote`),size:`40%`,opened:c,onClose:()=>l(!1)})]})},Oe=()=>{let{id:e,chalId:t}=F(),[n,r]=[parseInt(e??`-1`),parseInt(t??`-1`)],i=O(),{classes:o}=V({fw:`bold`,ff:`monospace`}),{challenge:s,mutate:c}=J(n,r),{t:l}=L(),d=e=>{i.openConfirmModal({title:l(`admin.button.challenges.flag.delete`),size:`35%`,children:(0,X.jsxs)(z,{children:[(0,X.jsx)(_,{children:l(`admin.content.games.challenges.flag.delete`)}),(0,X.jsx)(u,{variant:`unstyled`,value:e.flag,w:`100%`,size:`md`,readOnly:!0,classNames:o})]}),onConfirm:()=>e.id&&f(e.id),confirmProps:{color:`red`}})},f=async e=>{try{await h.edit.editRemoveFlag(n,r,e),p({color:`teal`,message:l(`admin.notification.games.challenges.flag.deleted`),icon:(0,X.jsx)($.Icon,{path:j,size:1})}),s&&c({...s,flags:s.flags.filter(t=>t.id!==e)})}catch(e){P(e,l)}};return(0,X.jsx)(de,{isLoading:!s,headProps:{justify:`apart`},backUrl:`/admin/games/${e}/challenges`,head:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(w,{lineClamp:1,className:a.wordBreakAll,children:[`# `,s?.title]}),(0,X.jsx)(U,{wrap:`nowrap`,justify:`right`,children:(0,X.jsx)(A,{component:N,leftSection:(0,X.jsx)($.Icon,{path:ae,size:1}),to:`/admin/games/${e}/challenges/${r}`,children:l(`admin.button.challenges.edit`)})})]}),children:s&&s.type===ue.DynamicAttachment?(0,X.jsx)(De,{onDelete:d}):(0,X.jsx)(Ee,{onDelete:d})})};export{Oe as default};