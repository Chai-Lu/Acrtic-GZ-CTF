/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import"./lcut4z52.js";import"./cbxtepre.js";import{t as e}from"./isy1dskq.js";import{t}from"./x5mn38mu.js";import"./cdbutviq.js";import{t as n}from"./d1c1pfr7.js";import"./kocdnk2i.js";import{t as r}from"./nu4jnu0f.js";import{c as i,u as a}from"./gaobt2im.js";import{t as o}from"./j0saofxo.js";import{t as s}from"./lquea752.js";import{t as c}from"./nugqs812.js";import"./gjb4rijj.js";import{t as l}from"./dut9ujr7.js";import{t as u}from"./o417b45d.js";import{t as d}from"./b671iymd.js";import"./h0nb8b87.js";import{t as f}from"./lj7msjkh.js";import{$i as p,$n as m,Ar as h,Br as g,Ca as _,Cr as v,Dr as y,Et as b,Fn as x,Gn as S,In as C,Ir as w,Jn as ee,Jr as T,Li as E,Mr as D,Nr as O,O as k,Oa as A,Or as j,Pn as te,Pt as ne,Ri as M,Rn as re,Rr as N,Sr as ie,Ti as ae,Vr as oe,W as P,Wi as se,Yn as F,a as ce,b as I,cr as le,ct as ue,dr as L,f as de,ft as fe,gt as pe,h as me,ha as he,ht as ge,jn as _e,jr as R,kr as z,li as B,m as ve,mt as ye,nn as be,or as xe,q as Se,vt as Ce,w as we,wr as V,yi as Te,zn as Ee,zr as De}from"./index.hrqptwjo.js";import{i as Oe,n as ke,r as Ae}from"./c5dhfig7.js";import{n as je}from"./iwhjrhtg.js";import{t as Me}from"./o7hpfmlv.js";import"./mdazlrzp.js";import{n as Ne,r as Pe,t as Fe}from"./eogutjjz.js";import{t as H}from"./gtptignr.js";import{t as Ie}from"./eojlsg3s.js";import"./fmw116au.js";import{t as Le}from"./efdmup3n.js";import"./laaps3um.js";import{t as Re}from"./odnwo8oc.js";var U=A(k()),W=A(y()),G=A(_()),K={spike:`Hc`,root:`Ic`,flag:`Jc`,icon:`Kc`,blood:`Lc`},q=A(he());const ze=e=>{let{challenge:t,solved:n,onClick:r,iconMap:i,teamId:a,colorMap:s}=e,l=we().get(t.category),u=E(),{locale:d}=m(),p=(0,G.useMemo)(()=>t.deadline?(0,W.default)().isAfter((0,W.default)(t.deadline)):!1,[t.deadline]);return(0,q.jsxs)(o,{onClick:r,radius:`md`,shadow:`sm`,className:se(c.hoverCard,K.root),"data-faded":n||p||void 0,"data-no-move":!0,children:[(0,q.jsxs)(R,{gap:`xs`,pos:`relative`,style:{zIndex:99},children:[(0,q.jsx)(B,{h:`30px`,wrap:`nowrap`,justify:`space-between`,gap:2,children:(0,q.jsx)(Ie,{text:t.title||``,size:`lg`})}),(0,q.jsx)(N,{size:`sm`,color:l?.color}),(0,q.jsxs)(B,{wrap:`nowrap`,justify:`space-between`,align:`center`,gap:2,children:[(0,q.jsxs)(T,{ta:`center`,fw:`bold`,fz:`lg`,ff:`monospace`,children:[t.score,`\xA0pts`]}),(0,q.jsxs)(R,{gap:`xs`,children:[(0,q.jsx)(j,{order:6,ta:`center`,mt:`calc(${u.spacing.xs} / 2)`,children:(0,q.jsxs)(f,{i18nKey:`challenge.content.solved`,values:{solved:t.solved},children:[`_`,(0,q.jsx)(De,{fz:`sm`,fw:`bolder`,bg:`transparent`,children:`_`}),`_`]})}),(0,q.jsx)(B,{justify:`center`,gap:`md`,h:20,wrap:`nowrap`,children:t.bloods&&t.bloods.map((e,t)=>{let n=i.get(ce[t]);return(0,q.jsx)(D.Floating,{position:`bottom`,multiline:!0,label:(0,q.jsxs)(R,{gap:0,children:[(0,q.jsx)(T,{fw:500,size:`sm`,children:e?.name}),(0,q.jsx)(T,{fw:500,size:`xs`,c:`dimmed`,children:(0,W.default)(e?.submitTimeUtc).locale(d).format(`SLL LTS`)})]}),children:(0,q.jsxs)(`div`,{style:{position:`relative`,height:20},children:[(0,q.jsx)(`div`,{className:K.blood,children:(0,q.jsx)(U.Icon,{...n})}),(0,q.jsx)(ae,{className:K.spike,"data-blood":a===e?.id||void 0,__vars:{"--blood-color":s.get(ce[t])}})]})},t)})})]})]})]}),l&&(0,q.jsx)(U.Icon,{size:4,path:l.icon,color:M(u.colors[l?.color][7],.3),className:K.icon}),n&&(0,q.jsx)(g,{className:K.flag,children:(0,q.jsx)(U.Icon,{size:1,path:`M14.4,6L14,4H5V21H7V14H12.6L13,16H20V6H14.4Z`})})]})};var Be={box:`rc`},Ve=A(k());const He=e=>{let{t}=L();return(0,q.jsxs)(R,{align:`center`,"data-border":e.bordered||void 0,className:Be.box,children:[(0,q.jsx)(Ve.Icon,{path:e.mdiPath??`M19,15H15A3,3 0 0,1 12,18A3,3 0 0,1 9,15H5V5H19M19,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z`,size:e.iconSize??4,color:`gray`}),(0,q.jsx)(T,{c:`dimmed`,size:e.fontSize,children:e.description??t(`common.content.no_data`)})]})};var J=A(k());const Ue=e=>{let{gameId:t,gameTitle:i,gameEnded:a,practiceMode:o,challengeId:s,cateData:c,status:l,title:u,score:d,...f}=e,{data:p,mutate:m}=C.game.useGameGetChallenge(t,s,{refreshInterval:120*1e3}),{config:h}=te(),{t:g}=L(),_=g(`challenge.content.wrong_flag_hints`,{returnObjects:!0}),y=p?.type===Ee.StaticContainer||p?.type===Ee.DynamicContainer,[b,S]=(0,G.useState)(!1),[w,ee]=(0,G.useState)(0),[T,E]=r(``),[D,O]=(0,G.useState)(null),k=p?.limit&&(p.attempts??0)>=p.limit||!1,A=async()=>{if(!(!s||b)){S(!0);try{let e=await C.game.gameCreateContainer(t,s);m({...p,context:{...p?.context,closeTime:e.data.expectStopAt,instanceEntry:e.data.entry}}),v({color:`teal`,title:g(`challenge.notification.instance.created.title`),message:g(`challenge.notification.instance.created.message`),icon:(0,q.jsx)(J.Icon,{path:P,size:1})})}catch(e){I(e,g)}finally{S(!1)}}},j=async()=>{try{if(await m(),!p?.context?.instanceEntry)return;await C.game.gameDeleteContainer(t,s),m({...p,context:{...p?.context,closeTime:null,instanceEntry:null}}),v({color:`teal`,title:g(`challenge.notification.instance.destroyed.title`),message:g(`challenge.notification.instance.destroyed.message`),icon:(0,q.jsx)(J.Icon,{path:P,size:1})})}catch(e){I(e,g)}},M=async()=>{!s||b||(S(!0),await j(),S(!1))},re=async()=>{if(!(!s||b)){S(!0);try{let e=await C.game.gameExtendContainerLifetime(t,s);m({...p,context:{...p?.context,closeTime:e.data.expectStopAt}})}catch(e){I(e,g)}finally{S(!1)}}},N=async()=>{if(!s||!T){v({color:`red`,message:g(`challenge.notification.flag.empty`),icon:(0,q.jsx)(J.Icon,{path:Se,size:1})});return}S(!0);try{ee((await C.game.gameSubmit(t,s,{flag:await Me(g,T,h.apiPublicKey)})).data),ie.clean(),v({id:`flag-submitted`,color:`orange`,title:g(`challenge.notification.flag.submitted.title`),message:g(`challenge.notification.flag.submitted.message`),loading:!0,autoClose:!1});let e=(p?.attempts??0)+1;m({attempts:p?.limit&&p.limit>0?Math.min(e,p.limit):e,...p});return}catch(e){I(e,g),S(!1);return}};(0,G.useEffect)(()=>{if(!w)return;let e=setInterval(async()=>{try{let n=await C.game.gameStatus(t,s,w);n.data!==x.FlagSubmitted&&(S(!1),E(``),ae(w,n.data),clearInterval(e))}catch(t){S(!1),E(``),I(t,g),clearInterval(e)}},500);return()=>clearInterval(e)},[w]),(0,G.useEffect)(()=>{s===D&&l!==F.Unaccepted&&l!==void 0&&O(null)},[l,s,p]);let ae=async(t,n)=>{n===x.Accepted?(O(s),V({id:`flag-submitted`,color:`teal`,title:g(`challenge.notification.flag.accepted.title`),message:g(a?`challenge.notification.flag.accepted.ended`:`challenge.notification.flag.accepted.message`),icon:(0,q.jsx)(J.Icon,{path:P,size:1}),autoClose:8e3,loading:!1}),y&&p.context?.instanceEntry&&await j(),e.onClose()):n===x.WrongAnswer?V({id:`flag-submitted`,color:`red`,title:g(`challenge.notification.flag.wrong`),message:_[Math.floor(Math.random()*_.length)],icon:(0,q.jsx)(J.Icon,{path:Se,size:1}),autoClose:8e3,loading:!1}):V({id:`flag-submitted`,color:`yellow`,title:g(`challenge.notification.flag.unknown.title`),message:g(`challenge.notification.flag.unknown.message`,{id:t}),icon:(0,q.jsx)(J.Icon,{path:ne,size:1}),autoClose:!1,withCloseButton:!0})};return(0,q.jsx)(n,{...f,gameTitle:i,challenge:p??{title:u,score:d},cateData:c,solved:l!==F.Unaccepted&&l!==void 0||D===s,flag:T,setFlag:E,onCreate:A,onDestroy:M,onSubmitFlag:N,disabled:b||k,onExtend:re,gameEnded:a,practiceMode:o})};var Y=A(k()),X=A(y());const We=({gameId:e,writeupDeadline:t,...n})=>{let{data:r,mutate:i}=C.game.useGameGetWriteup(e,_e),a=E(),[u,d]=(0,G.useState)((0,X.default)(t)),{locale:p}=m(),[h,g]=(0,G.useState)((0,X.default)().isAfter(t)),[_,y]=(0,G.useState)(0),b=r?.submitted?a.colors.teal[5]:a.colors.red[5],{t:x}=L();(0,G.useEffect)(()=>{d((0,X.default)(t)),g((0,X.default)().isAfter(t))},[t]);let S=async t=>{if(!(!t||h)){y(0),g(!0);try{await C.game.gameSubmitWriteup(e,{file:t},{onUploadProgress:e=>{y(e.loaded/(e.total??1)*100)}}),y(100),v({color:`teal`,message:x(`game.notification.writeup.submitted`),icon:(0,q.jsx)(Y.Icon,{path:P,size:1})}),i(),g(!1)}catch(e){I(e,x)}finally{y(0),g(!1)}}};return(0,q.jsx)(O,{title:(0,q.jsxs)(B,{w:`100%`,justify:`space-between`,children:[(0,q.jsx)(j,{order:4,children:x(`game.content.writeup.title`)}),(0,q.jsxs)(B,{gap:4,children:[(0,q.jsx)(Y.Icon,{path:r?.submitted?P:ue,size:.9,color:b}),(0,q.jsx)(T,{fw:600,size:`md`,c:b,children:r?.submitted?x(`game.content.writeup.submitted`):x(`game.content.writeup.unsubmitted`)})]})]}),...n,classNames:{header:c.m0,title:se(c.w100,c.m0)},children:(0,q.jsxs)(R,{gap:`xs`,mt:0,children:[(0,q.jsx)(N,{}),(0,q.jsx)(j,{order:5,children:x(`game.content.writeup.instructions.title`)}),(0,q.jsxs)(w,{classNames:{itemWrapper:c.listItemWrapper},children:[(0,q.jsx)(w.Item,{children:(0,q.jsx)(T,{children:(0,q.jsxs)(f,{i18nKey:`game.content.writeup.instructions.deadline`,values:{datetime:u.locale(p).format(`LL LTS`)},children:[`_`,(0,q.jsx)(T,{mx:5,span:!0,fw:600,c:`yellow`,children:`_`}),`_`]})})}),(0,q.jsx)(w.Item,{children:(0,q.jsx)(T,{children:(0,q.jsxs)(f,{i18nKey:`game.content.writeup.instructions.file_format`,children:[`_`,(0,q.jsx)(T,{mx:5,fw:600,span:!0,c:`yellow`,children:`_`}),`_`]})})})]}),r?.note&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j,{order:5,children:x(`game.content.writeup.instructions.additional`)}),(0,q.jsx)(Ae,{source:r.note})]}),(0,q.jsx)(j,{order:5,children:x(`game.content.writeup.current`)}),(0,q.jsx)(o,{children:r&&r.submitted?(0,q.jsxs)(B,{children:[(0,q.jsx)(Y.Icon,{path:fe,size:1.5}),(0,q.jsxs)(R,{gap:0,children:[(0,q.jsx)(T,{fw:600,size:`md`,children:r.name}),(0,q.jsx)(T,{fw:600,size:`sm`,c:`dimmed`,ff:`monospace`,children:r.fileSize&&de(r.fileSize)})]})]}):(0,q.jsxs)(B,{children:[(0,q.jsx)(Y.Icon,{path:ye,size:1.5}),(0,q.jsx)(R,{gap:0,children:(0,q.jsx)(T,{fw:600,size:`md`,children:x(`game.content.writeup.unsubmitted_note`)})})]})}),(0,q.jsx)(s,{onChange:S,accept:`application/pdf`,children:e=>(0,q.jsxs)(oe,{...e,fullWidth:!0,className:H.button,disabled:h,color:_===0?a.primaryColor:`cyan`,children:[(0,q.jsx)(`div`,{className:H.label,children:(0,X.default)().isAfter(u)?x(`game.content.writeup.deadline_exceeded`):x(_===0?`game.button.writeup.upload`:`game.button.writeup.uploading`)}),_!==0&&(0,q.jsx)(l,{value:_,className:H.progress,color:M(a.colors[a.primaryColor][2],.35),radius:`sm`})]})})]})})};var Z={tabRoot:`xa`,tabList:`ya`,tabLabel:`za`,tab:`Aa`,switch:`Ba`,scrollArea:`Ca`},Ge=A(k()),Ke=A(y());const qe=()=>{let{hash:e}=xe(),{id:t}=le(),n=parseInt(t??`-1`),{teamInfo:r}=a(n),s=r?.challenges,{game:c}=i(n),l=Object.keys(s??{}),[f,m]=(0,G.useState)(`All`),[_,v]=p({key:`hide-solved`,defaultValue:!1,getInitialValueInEffect:!1}),y=Object.values(s??{}).flat(),b=s&&(f===`All`?y:s[f]??[]).filter(e=>!_||(r&&r.rank?.solvedChallenges?.find(t=>t.id===e.id))===void 0),[x,S]=(0,G.useState)(null),[C,w]=(0,G.useState)(!1),{iconMap:ee,colorMap:E}=me(.8),[D,O]=(0,G.useState)(!1),k=we(),{t:A}=L();return(0,G.useEffect)(()=>{let t=e.slice(1).split(`-`)[0];if(t&&y){let e=parseInt(t);if(isNaN(e)||e<0||x?.id===e)return;let n=y.find(t=>t.id===e);n&&(S(n),w(!0))}},[e,x,y]),s?y.length===0?(0,q.jsx)(g,{h:`calc(100vh - 100px)`,w:`100%`,children:(0,q.jsx)(He,{bordered:!0,description:A(`game.content.no_challenge`),fontSize:`xl`,mdiPath:Ce,iconSize:8})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(R,{miw:`10.5rem`,children:[c?.writeupRequired&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(oe,{px:`xs`,justify:`space-between`,leftSection:(0,q.jsx)(Ge.Icon,{path:`M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M12,12L16,16H13.5V19H10.5V16H8L12,12Z`,size:1}),onClick:()=>O(!0),children:A(`game.button.submit_writeup`)}),(0,q.jsx)(N,{})]}),(0,q.jsx)(h,{w:`10.5rem`,checked:_,onChange:e=>v(e.target.checked),classNames:{body:Z.switch},label:(0,q.jsx)(T,{fz:`md`,fw:`bold`,ta:`right`,children:A(`game.button.hide_solved`)})}),(0,q.jsx)(z,{orientation:`vertical`,variant:`pills`,value:f,onChange:e=>m(e),classNames:{root:Z.tabRoot,list:Z.tabList,tabLabel:Z.tabLabel,tab:Z.tab},children:(0,q.jsxs)(z.List,{children:[(0,q.jsx)(z.Tab,{value:`All`,leftSection:(0,q.jsx)(Ge.Icon,{path:be,size:1}),children:(0,q.jsxs)(B,{justify:`space-between`,wrap:`nowrap`,gap:2,children:[(0,q.jsx)(T,{fz:`sm`,fw:`bold`,children:`All`}),(0,q.jsx)(T,{fz:`sm`,fw:`bold`,children:y.length})]})}),l.map(e=>{let t=k.get(e);return(0,q.jsx)(z.Tab,{value:e,leftSection:(0,q.jsx)(Ge.Icon,{path:t?.icon,size:1}),color:t?.color,children:(0,q.jsxs)(B,{justify:`space-between`,wrap:`nowrap`,gap:2,children:[(0,q.jsx)(T,{fz:`sm`,fw:`bold`,children:t?.name}),(0,q.jsx)(T,{fz:`sm`,fw:`bold`,children:s&&s[e].length})]})},e)})]})})]}),(0,q.jsx)(Te,{h:`calc(100vh - 6.67rem)`,pos:`relative`,offsetScrollbars:!0,scrollbarSize:4,classNames:{root:Z.scrollArea},children:!r.rank?.divisionId&&!r?.rank?.rank?(0,q.jsx)(g,{h:`calc(100vh - 10rem)`,children:(0,q.jsxs)(R,{gap:0,children:[(0,q.jsx)(j,{order:2,children:A(`game.content.scoreboard_not_ready.title`)}),(0,q.jsx)(T,{children:A(`game.content.scoreboard_not_ready.comment`)})]})}):b&&b.length?(0,q.jsx)(u,{p:`xs`,w:`100%`,pt:0,spacing:`sm`,cols:{base:3,w18:4,w24:6,w30:8,w36:10,w42:12,w48:14},children:b?.map(e=>{let t=r?.rank?.solvedChallenges?.find(t=>t.id===e.id)?.type;return(0,q.jsx)(ze,{challenge:e,iconMap:ee,colorMap:E,onClick:()=>{S(e),w(!0),window.location.hash=`#${e.id}-${encodeURIComponent(e.title?.replace(/ /g,`-`)??``)}`},solved:t!==F.Unaccepted&&t!==void 0,teamId:r?.rank?.id},e.id)})}):(0,q.jsx)(g,{h:`calc(100vh - 10rem)`,children:(0,q.jsxs)(R,{gap:0,children:[(0,q.jsx)(j,{order:2,children:A(`game.content.all_solved.title`)}),(0,q.jsx)(T,{children:A(`game.content.all_solved.comment`)})]})})}),c?.writeupRequired&&(0,q.jsx)(We,{opened:D,onClose:()=>O(!1),withCloseButton:!1,size:`40%`,gameId:n,writeupDeadline:r.writeupDeadline}),x?.id&&(0,q.jsx)(Ue,{gameId:n,gameTitle:c?.title??``,opened:C,withCloseButton:!1,onClose:()=>{window.location.hash=``,w(!1)},gameEnded:(0,Ke.default)(c?.end)<(0,Ke.default)(),practiceMode:c?.practiceMode,status:r?.rank?.solvedChallenges?.find(e=>e.id===x?.id)?.type,cateData:k.get(x?.category??re.Misc),title:x?.title??``,score:x?.score??0,challengeId:x.id})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(R,{miw:`10rem`,maw:`10rem`,children:Array(9).fill(null).map((e,t)=>(0,q.jsxs)(B,{wrap:`nowrap`,p:10,children:[(0,q.jsx)(d,{height:`1.5rem`,width:`1.5rem`}),(0,q.jsx)(d,{height:`1rem`})]},t))}),(0,q.jsx)(u,{p:`xs`,pt:0,spacing:`sm`,pos:`relative`,w:`calc(100% - 9rem)`,cols:{base:3,w18:4,w24:6,w30:8,w36:10,w42:12,w48:14},children:Array(13).fill(null).map((e,t)=>(0,q.jsx)(o,{radius:`md`,shadow:`sm`,children:(0,q.jsxs)(R,{gap:`sm`,pos:`relative`,style:{zIndex:99},children:[(0,q.jsx)(d,{height:`1.5rem`,width:`70%`,mt:4}),(0,q.jsx)(N,{}),(0,q.jsxs)(B,{wrap:`nowrap`,justify:`space-between`,align:`start`,children:[(0,q.jsx)(g,{children:(0,q.jsx)(d,{height:`1.5rem`,width:`5rem`})}),(0,q.jsxs)(R,{gap:`xs`,children:[(0,q.jsx)(d,{height:`1rem`,width:`6rem`,mt:5}),(0,q.jsxs)(B,{justify:`center`,gap:`md`,h:20,children:[(0,q.jsx)(d,{height:`1.2rem`,width:`1.2rem`}),(0,q.jsx)(d,{height:`1.2rem`,width:`1.2rem`}),(0,q.jsx)(d,{height:`1.2rem`,width:`1.2rem`})]})]})]})]})},t))})]})};var Je=A(k()),Ye=A(y()),Q=function(e){return e.All=`all`,e.Challenge=`challenge`,e.Events=`events`,e.Game=`game`,e}(Q||{}),Xe=(e,t)=>{switch(t){case Q.All:return e;case Q.Challenge:return e.filter(e=>e.type===S.NewChallenge||e.type===S.NewHint);case Q.Events:return e.filter(e=>e.type===S.FirstBlood||e.type===S.SecondBlood||e.type===S.ThirdBlood);case Q.Game:return e.filter(e=>e.type===S.Normal);default:return e}},$=(e,t)=>{switch(t.type){case S.Normal:return t.values.at(-1)||``;case S.NewChallenge:return e(`game.notice.new_challenge`,{title:t.values.at(0)});case S.NewHint:return e(`game.notice.new_hint`,{title:t.values.at(0)});case S.FirstBlood:return e(`game.notice.blood`,{team:t.values.at(0),chal:t.values.at(1),blood:e(`challenge.bonus.first_blood`)});case S.SecondBlood:return e(`game.notice.blood`,{team:t.values.at(0),chal:t.values.at(1),blood:e(`challenge.bonus.second_blood`)});case S.ThirdBlood:return e(`game.notice.blood`,{team:t.values.at(0),chal:t.values.at(1),blood:e(`challenge.bonus.third_blood`)});default:return t.values.at(-1)||``}},Ze=`calc(100vh - 25rem)`;const Qe=()=>{let{id:e}=le(),n=parseInt(e??`-1`),[,r]=(0,G.useState)(new Date),i=(0,G.useRef)([]),[a,s]=(0,G.useState)(Q.All),l=ve(.8),{t:u}=L(),{locale:d}=m(),f=E(),{data:p}=C.game.useGameNotices(n,{},_e);(0,G.useEffect)(()=>{i.current=[]},[p]),(0,G.useEffect)(()=>{if(e){let e=new Fe().withUrl(`/hub/user?game=${n}`).withHubProtocol(new Ne).withAutomaticReconnect().configureLogging(Pe.None).build();return e.serverTimeoutInMilliseconds=60*1e3*60*2,e.on(`ReceivedGameNotice`,e=>{i.current=[e,...i.current],(e.type===S.NewChallenge||e.type===S.NewHint)&&v({color:`yellow`,message:$(u,e),autoClose:5e3}),e.type===S.Normal&&v({color:f.primaryColor,message:$(u,e),autoClose:5e3}),r(new Date(e.time))}),e.start().catch(e=>{console.error(e)}),()=>{e.stop().catch(e=>{console.error(e)})}}});let h=Xe([...i.current,...p??[]],a);return h.sort((e,t)=>e.type!==t.type&&(e.type===S.Normal||t.type==S.Normal)?+(e.type!==S.Normal)||-1:(0,Ye.default)(t.time).diff(e.time)),(0,q.jsx)(o,{shadow:`sm`,w:`100%`,children:(0,q.jsxs)(R,{gap:`xs`,children:[(0,q.jsx)(t,{value:a,color:f.primaryColor,fullWidth:!0,bg:`transparent`,fw:500,onChange:e=>s(e),data:[{value:Q.All,label:u(`game.label.notice_type.all`)},{value:Q.Game,label:u(`game.label.notice_type.game`)},{value:Q.Events,label:u(`game.label.notice_type.events`)},{value:Q.Challenge,label:u(`game.label.notice_type.challenge`)}]}),h.length?(0,q.jsx)(Te,{offsetScrollbars:!0,scrollbarSize:0,h:Ze,children:(0,q.jsx)(w,{size:`sm`,spacing:3,classNames:{itemWrapper:c.alignNormal},children:h.map(e=>(0,q.jsx)(w.Item,{icon:(0,q.jsx)(Je.Icon,{...l.get(e.type)}),children:(0,q.jsxs)(R,{gap:1,children:[(0,q.jsx)(T,{fz:`xs`,fw:`bold`,c:`dimmed`,children:(0,Ye.default)(e.time).locale(d).format(`SLL LTS`)}),e.type===S.Normal?(0,q.jsx)(ke,{fz:`sm`,fw:500,c:`dimmed`,source:$(u,e)}):(0,q.jsx)(T,{fz:`sm`,fw:500,c:`dimmed`,className:Oe.inline,children:$(u,e)})]})},e.id))})}):(0,q.jsx)(g,{h:Ze,children:(0,q.jsx)(He,{description:u(`game.content.no_notice`)})})]})})};var $e=()=>(0,q.jsx)(e,{width:`90%`,children:(0,q.jsx)(je,{requiredRole:ee.User,children:(0,q.jsx)(Re,{children:(0,q.jsxs)(B,{gap:`sm`,justify:`space-between`,align:`flex-start`,wrap:`nowrap`,children:[(0,q.jsx)(qe,{}),(0,q.jsxs)(R,{gap:`sm`,miw:`22rem`,maw:`22rem`,children:[(0,q.jsx)(Le,{}),(0,q.jsx)(Qe,{})]})]})})})});export{$e as default};