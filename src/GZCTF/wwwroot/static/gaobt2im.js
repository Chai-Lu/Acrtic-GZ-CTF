/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import{t as e}from"./j0saofxo.js";import{t}from"./nugqs812.js";import{$n as n,Br as r,Ca as i,Ci as a,Dr as o,G as s,Gi as c,Hr as l,In as u,Jr as d,Kn as f,Li as p,O as m,Oa as h,Or as g,Pi as _,Ti as v,ar as y,ca as b,dr as x,ha as S,ji as C,jn as w,jr as T,li as E,vt as D}from"./index.hrqptwjo.js";var O={root:`m_2ce0de02`},k=h(S(),1);i();var A=c((e,{radius:t})=>({root:{"--bi-radius":t===void 0?void 0:b(t)}})),j=a((e,t)=>{let n=C(`BackgroundImage`,null,e),{classNames:r,className:i,style:a,styles:o,unstyled:s,vars:c,radius:l,src:u,variant:d,attributes:f,...p}=n;return(0,k.jsx)(v,{ref:t,variant:d,..._({name:`BackgroundImage`,props:n,classes:O,className:i,style:a,classNames:r,styles:o,unstyled:s,attributes:f,vars:c,varsResolver:A})(`root`,{style:{backgroundImage:`url(${u})`}}),...p})});j.classes=O,j.displayName=`@mantine/core/BackgroundImage`;var M=h(o());const N=()=>{let{data:e,mutate:t,error:n}=u.game.useGameRecentGames({limit:7},{refreshInterval:1800*1e3});return{recentGames:e,error:n,mutate:t}},P=e=>{let t=(0,M.default)(e?.start),n=(0,M.default)(e?.end),r=n.diff(t,`minute`),i=(0,M.default)().diff(t,`minute`),a=(0,M.default)().isAfter(n),o=(0,M.default)().isAfter(t),s=o?a?1:i/r:0,c=o?a?H.Ended:H.OnGoing:H.Coming;return{startTime:t,endTime:n,finished:a,started:o,progress:s*100,total:r,status:c}},F=(e,t)=>!t||t===0?e(`game.tag.multiplayer`):t===1?e(`game.tag.individual`):e(`game.tag.limited`,{count:t}),I=e=>{let{data:t,mutate:n,error:r}=u.edit.useEditGetGame(e,w,e>0);return{game:t,error:r,mutate:n}},L=e=>{let{data:t,mutate:n,error:r}=u.edit.useEditGetDivisions(e,w,e>0);return{divisions:t,error:r,mutate:n,hasDivisions:(t?.length??0)>0}},R=e=>{let{data:t,error:n,mutate:r}=u.game.useGameGame(e,w,e>0);return{game:t,error:n,mutate:r,status:t?.status??f.Unsubmitted}},z=e=>{let{game:t}=R(e),{status:n}=P(t),{data:r,error:i,mutate:a}=u.game.useGameScoreboard(e,{...w,refreshInterval:n===H.OnGoing?30*1e3:0});return{scoreboard:r,error:i,mutate:a}},B=e=>{let{game:t}=R(e),{status:n}=P(t),{data:r,error:i,mutate:a}=u.game.useGameChallengesWithTeamInfo(e,{...w,shouldRetryOnError:!1,refreshInterval:n===H.OnGoing?10*1e3:0});return{teamInfo:r,game:t,error:i,mutate:a}};var V=h(m());let H=function(e){return e.Coming=`coming`,e.OnGoing=`ongoing`,e.Ended=`ended`,e}({});const U=new Map([[H.Coming,`yellow`],[H.OnGoing,`green`],[H.Ended,`blue`]]),W=({game:i,...a})=>{let o=p(),{t:c}=x(),{locale:u}=n(),{summary:f,title:m,poster:h,limit:_}=i,{startTime:v,endTime:b,status:S}=P(i),C=b.diff(v,`hours`),w=U.get(S);return(0,k.jsxs)(e,{...a,shadow:`sm`,component:y,to:`/games/${i.id}`,classNames:{root:t.hoverCard},children:[(0,k.jsx)(e.Section,{children:(0,k.jsxs)(j,{src:h??``,h:`12rem`,w:`100%`,pos:`relative`,children:[!h&&(0,k.jsx)(r,{h:`100%`,children:(0,k.jsx)(V.Icon,{path:`M12.36,6L12.76,8H18V14H14.64L14.24,12H7V6H12.36M14,4H5V21H7V14H12.6L13,16H20V6H14.4`,size:4,color:o.colors.gray[5]})}),(0,k.jsx)(r,{pos:`absolute`,top:8,right:8,children:(0,k.jsx)(l,{color:w,size:`sm`,variant:`filled`,children:S})})]})}),(0,k.jsxs)(T,{gap:`sm`,pt:`sm`,children:[(0,k.jsx)(E,{gap:0,justify:`space-between`,align:`flex-start`,children:(0,k.jsxs)(T,{gap:2,flex:1,children:[(0,k.jsxs)(E,{wrap:`nowrap`,gap:`xs`,children:[(0,k.jsx)(l,{size:`xs`,color:w,children:F(c,_)}),(0,k.jsx)(l,{size:`xs`,color:w,children:c(`game.content.duration`,{hours:C})})]}),(0,k.jsx)(g,{order:3,ta:`left`,lineClamp:2,children:m}),(0,k.jsxs)(E,{mt:4,wrap:`nowrap`,gap:3,children:[(0,k.jsx)(l,{size:`xs`,color:w,children:v.locale(u).format(`L LTS`)}),(0,k.jsx)(V.Icon,{path:s,size:1}),(0,k.jsx)(l,{size:`xs`,color:w,children:b.locale(u).format(`L LTS`)})]})]})}),(0,k.jsx)(d,{fw:500,size:`sm`,lineClamp:3,children:f})]})]})};export{F as a,R as c,N as d,j as f,P as i,z as l,U as n,L as o,H as r,I as s,W as t,B as u};