/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import{t as e}from"./kocdnk2i.js";import{t}from"./nu4jnu0f.js";import"./nugqs812.js";import{t as n}from"./gjb4rijj.js";import"./dut9ujr7.js";import{Ca as r,Cr as i,In as a,O as o,Oa as s,Pn as c,Vr as l,W as u,b as d,dr as f,ha as p,or as m,q as h,sr as g}from"./index.hrqptwjo.js";import{t as _}from"./lpdh7ltc.js";import{t as v}from"./o7hpfmlv.js";import{t as y}from"./pbjgqd5h.js";var b={" ":`space`,ArrowLeft:`arrowleft`,ArrowRight:`arrowright`,ArrowUp:`arrowup`,ArrowDown:`arrowdown`,Escape:`escape`,Esc:`escape`,esc:`escape`,Enter:`enter`,Tab:`tab`,Backspace:`backspace`,Delete:`delete`,Insert:`insert`,Home:`home`,End:`end`,PageUp:`pageup`,PageDown:`pagedown`,"+":`plus`,"-":`minus`,"*":`asterisk`,"/":`slash`};function x(e){let t=e.replace(`Key`,``).toLowerCase();return b[e]||t}function S(e){let t=e.toLowerCase().split(`+`).map(e=>e.trim()),n={alt:t.includes(`alt`),ctrl:t.includes(`ctrl`),meta:t.includes(`meta`),mod:t.includes(`mod`),shift:t.includes(`shift`),plus:t.includes(`[plus]`)},r=[`alt`,`ctrl`,`meta`,`shift`,`mod`],i=t.find(e=>!r.includes(e));return{...n,key:i===`[plus]`?`+`:i}}function C(e,t,n){let{alt:r,ctrl:i,meta:a,mod:o,shift:s,key:c}=e,{altKey:l,ctrlKey:u,metaKey:d,shiftKey:f,key:p,code:m}=t;if(r!==l)return!1;if(o){if(!u&&!d)return!1}else if(i!==u||a!==d)return!1;return s===f?!!(c&&(n?x(m)===x(c):x(p??m)===x(c))):!1}function w(e,t){return n=>C(S(e),n,t)}function T(e){return t=>{let n=`nativeEvent`in t?t.nativeEvent:t;e.forEach(([e,r,i={preventDefault:!0,usePhysicalKeys:!1}])=>{w(e,i.usePhysicalKeys)(n)&&(i.preventDefault&&t.preventDefault(),r(n))})}}var E=s(o(),1),D=s(r(),1),O=s(p(),1),k=()=>{let r=m(),o=new URLSearchParams(r.search),s=o.get(`token`),p=o.get(`email`),b=g(),[x,S]=t(``),[C,w]=t(``),[k,A]=(0,D.useState)(!1),{t:j}=f(),{config:M}=c();e(j(`account.title.reset`));let N=async()=>{if(x!==C){i({color:`red`,title:j(`common.error.check_input`),message:j(`account.password.not_match`),icon:(0,O.jsx)(E.Icon,{path:h,size:1})});return}if(!(s&&p)){i({color:`red`,message:j(`common.error.param_error`),icon:(0,O.jsx)(E.Icon,{path:h,size:1})});return}A(!0);try{await a.account.accountPasswordReset({rToken:s,email:p,password:await v(j,x,M.apiPublicKey)}),i({color:`teal`,title:j(`account.notification.reset.success.title`),message:j(`account.notification.reset.success.message`),icon:(0,O.jsx)(E.Icon,{path:u,size:1})}),b(`/account/login`)}catch(e){d(e,j)}finally{A(!1)}},P=T([[`Enter`,N]]);return(0,O.jsxs)(_,{children:[(0,O.jsx)(y,{value:x,onChange:e=>S(e.currentTarget.value),label:j(`account.label.password`),disabled:k,onKeyDown:P}),(0,O.jsx)(n,{required:!0,value:C,onChange:e=>w(e.currentTarget.value),label:j(`account.label.password_retype`),w:`100%`,disabled:k,error:x!==C,onKeyDown:P}),(0,O.jsx)(l,{fullWidth:!0,onClick:N,disabled:k,children:j(`account.button.reset`)})]})};export{k as default};