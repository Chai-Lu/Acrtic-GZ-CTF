/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import{i as e}from"./lcut4z52.js";import{t}from"./isy1dskq.js";import{t as n}from"./kocdnk2i.js";import{t as r}from"./f25gev77.js";import"./j0saofxo.js";import{t as i}from"./nugqs812.js";import"./b671iymd.js";import"./h0nb8b87.js";import{Ca as a,In as o,Jn as s,O as c,Oa as l,Vr as u,ar as d,b as f,dr as p,ha as m,jn as h,jr as g,li as _,tn as v}from"./index.hrqptwjo.js";import"./c5dhfig7.js";import{t as y}from"./iwhjrhtg.js";import{t as b}from"./juko2pme.js";var x=l(c(),1),S=l(a(),1),C=l(m(),1),w=10,T=()=>{let{data:a,mutate:c}=o.info.useInfoGetPosts(h),[l,m]=(0,S.useState)(1),{role:v}=e(),{t:T}=p();n(T(`post.title.index`));let E=async(e,t)=>{t(!0);try{let t=await o.edit.editUpdatePost(e.id,{isPinned:!e.isPinned});e.isPinned?c([...a?.filter(t=>t.id!==e.id&&t.isPinned)??[],{...t.data},...a?.filter(t=>t.id!==e.id&&!t.isPinned)??[]]):c([{...t.data},...a?.filter(t=>t.id!==e.id&&t.isPinned)??[],...a?.filter(t=>t.id!==e.id&&!t.isPinned)??[]]),o.info.mutateInfoGetLatestPosts()}catch(e){f(e,T)}finally{t(!1)}};return(0,C.jsxs)(t,{isLoading:!a,minWidth:0,withHeader:!0,stickyHeader:!0,children:[(0,C.jsxs)(g,{justify:`space-between`,mih:`calc(100vh - 78px)`,children:[(0,C.jsx)(g,{children:a?.slice((l-1)*w,l*w).map(e=>(0,C.jsx)(b,{post:e,onTogglePinned:E},e.id))}),(0,C.jsx)(r.Root,{total:Math.ceil((a?.length??0)/w),siblings:3,value:l,onChange:m,mb:`xl`,children:(0,C.jsxs)(_,{gap:5,justify:`flex-end`,children:[(0,C.jsx)(r.First,{}),(0,C.jsx)(r.Previous,{}),(0,C.jsx)(r.Items,{}),(0,C.jsx)(r.Next,{}),(0,C.jsx)(r.Last,{})]})})]}),y(s.Admin,v)&&(0,C.jsx)(u,{component:d,className:i.fixedButton,__vars:{"--fixed-right":`calc(0.1 * (100vw - 70px - 2rem) + 1rem)`,"--fixed-bottom":`6rem`},variant:`filled`,radius:`xl`,size:`md`,leftSection:(0,C.jsx)(x.Icon,{path:`M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z`,size:1}),to:`/posts/new/edit`,children:T(`post.button.new`)})]})};export{T as default};