/* The GZ::CTF Project @unknown
 * 
 * License   : GNU Affero General Public License v3.0 (Core)
 * License   : LicenseRef-GZCTF-Restricted (Restricted components)
 * Commit    : Unofficial build version
 * Build     : 2025-12-08T11:45:34.456Z
 * Copyright (C) 2022-2025 GZTimeWalker. All Rights Reserved.
 */
import"./lcut4z52.js";import"./cbxtepre.js";import{f as e,m as t}from"./isy1dskq.js";import"./cdbutviq.js";import{n,t as r}from"./d1c1pfr7.js";import"./kocdnk2i.js";import{t as i}from"./nu4jnu0f.js";import{t as a}from"./glsbf5jj.js";import"./hrbt7ry7.js";import{c as o}from"./gaobt2im.js";import"./j0saofxo.js";import{t as s}from"./kpl3u1sg.js";import{t as c}from"./nugqs812.js";import{t as l}from"./bfzgeflf.js";import"./o417b45d.js";import"./b671iymd.js";import{t as u}from"./h0nb8b87.js";import{t as d}from"./mi2mv45h.js";import{$ as f,$r as p,Ar as m,Ca as h,Cr as g,Dr as _,Gi as v,In as y,Jr as b,Li as x,Lr as ee,Mi as S,O as C,Oa as w,Or as te,Pi as T,Qi as E,Rn as ne,Si as re,T as ie,Ti as D,Tr as ae,Vr as O,W as k,X as A,Xi as j,_ as M,ar as oe,b as N,c as se,ca as P,cr as ce,di as F,dr as I,ha as L,ji as le,jr as R,la as z,li as B,lt as V,ma as H,mi as U,o as ue,q as W,s as de,sr as G,tn as fe,tt as pe,w as K,wi as me,ya as he,yi as ge,zi as _e,zn as q}from"./index.hrqptwjo.js";import"./c5dhfig7.js";import"./iwhjrhtg.js";import"./mdazlrzp.js";import"./mbfygvvk.js";import{t as ve}from"./bok6ip78.js";import"./lvtgxs0o.js";import{n as ye,t as be}from"./o4secb0i.js";import{t as xe}from"./qo69arss.js";import"./fmw116au.js";import{t as J}from"./ekmrvexc.js";function Se(e,t){return t.length===0?e:t.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t)}var Y=w(h(),1),X=w(L(),1),[Ce,Z]=H(`SliderProvider was not found in tree`),we=(0,Y.forwardRef)(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:a,...o},s)=>{let{getStyles:c}=Z();return(0,X.jsx)(D,{tabIndex:-1,variant:n,size:e,ref:s,...c(`root`),...o})});we.displayName=`@mantine/core/SliderRoot`;var Te=(0,Y.forwardRef)(({max:e,min:t,value:n,position:r,label:i,dragging:a,onMouseDown:o,onKeyDownCapture:s,labelTransitionProps:c,labelAlwaysOn:l,thumbLabel:u,onFocus:d,onBlur:f,showLabelOnHover:p,isHovered:m,children:h=null,disabled:g},_)=>{let{getStyles:v}=Z(),[y,b]=(0,Y.useState)(!1),x=l||a||y||p&&m;return(0,X.jsxs)(D,{tabIndex:0,role:`slider`,"aria-label":u,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:_,__vars:{"--slider-thumb-offset":`${r}%`},...v(`thumb`,{focusable:!0}),mod:{dragging:a,disabled:g},onFocus:e=>{b(!0),typeof d==`function`&&d(e)},onBlur:e=>{b(!1),typeof f==`function`&&f(e)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:s,onClick:e=>e.stopPropagation(),children:[h,(0,X.jsx)(U,{mounted:i!=null&&!!x,transition:`fade`,duration:0,...c,children:e=>(0,X.jsx)(`div`,{...v(`label`,{style:e}),children:i})})]})});Te.displayName=`@mantine/core/SliderThumb`;function Q({value:e,min:t,max:n}){let r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Ee({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t==`number`&&e.value<=t||e.value>=n:typeof t==`number`?e.value>=t&&e.value<=n:e.value<=n}function De({marks:e,min:t,max:n,disabled:r,value:i,offset:a,inverted:o}){let{getStyles:s}=Z();return e?(0,X.jsx)(`div`,{children:e.map((e,c)=>(0,Y.createElement)(D,{...s(`markWrapper`),__vars:{"--mark-offset":`${Q({value:e.value,min:t,max:n})}%`},key:c},(0,X.jsx)(D,{...s(`mark`),mod:{filled:Ee({mark:e,value:i,offset:a,inverted:o}),disabled:r}}),e.label&&(0,X.jsx)(`div`,{...s(`markLabel`),children:e.label})))}):null}De.displayName=`@mantine/core/SliderMarks`;function Oe({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:a,containerProps:o,...s}){let{getStyles:c}=Z();return(0,X.jsx)(D,{...c(`trackContainer`),mod:{disabled:r},...o,children:(0,X.jsxs)(D,{...c(`track`),mod:{inverted:a,disabled:r},children:[(0,X.jsx)(D,{mod:{inverted:a,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + 2 * var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...c(`bar`)}),t,(0,X.jsx)(De,{...s,offset:i,disabled:r,inverted:a})]})})}Oe.displayName=`@mantine/core/SliderTrack`;function ke({value:e,containerWidth:t,min:n,max:r,step:i,precision:a}){let o=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),s=(o===0?0:Math.round(o/i)*i)+n,c=Math.max(s,n);return a===void 0?c:Number(c.toFixed(a))}function Ae(e,t){return parseFloat(e.toFixed(t))}function je(e){if(!e)return 0;let t=e.toString().split(`.`);return t.length>1?t[1].length:0}function Me(e,t){let n=[...t].sort((e,t)=>e.value-t.value).find(t=>t.value>e);return n?n.value:e}function Ne(e,t){let n=[...t].sort((e,t)=>t.value-e.value).find(t=>t.value<e);return n?n.value:e}function Pe(e){let t=[...e].sort((e,t)=>e.value-t.value);return t.length>0?t[0].value:0}function Fe(e){let t=[...e].sort((e,t)=>e.value-t.value);return t.length>0?t[t.length-1].value:100}var Ie={root:`m_dd36362e`,label:`m_c9357328`,thumb:`m_c9a9a60a`,trackContainer:`m_a8645c2`,track:`m_c9ade57f`,bar:`m_38aeed47`,markWrapper:`m_b7b0423a`,mark:`m_dd33bc19`,markLabel:`m_68c77a5b`},Le={radius:`xl`,min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:`fade`,duration:0},thumbLabel:``,showLabelOnHover:!0,scale:e=>e,size:`md`},Re=v((e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":z(t,`slider-size`),"--slider-color":n?_e(n,e):void 0,"--slider-radius":i===void 0?void 0:P(i),"--slider-thumb-size":r===void 0?`calc(var(--slider-size) * 2)`:he(r)}})),ze=me((n,r)=>{let i=le(`Slider`,Le,n),{classNames:a,styles:o,value:s,onChange:c,onChangeEnd:l,size:u,min:d,max:f,domain:p,step:m,precision:h,defaultValue:g,name:_,marks:v,label:y,labelTransitionProps:b,labelAlwaysOn:x,thumbLabel:ee,showLabelOnHover:S,thumbChildren:C,disabled:w,unstyled:te,scale:ne,inverted:ie,className:D,style:ae,vars:O,hiddenInputProps:k,restrictToMarks:A,thumbProps:M,attributes:oe,...N}=i,se=T({name:`Slider`,props:i,classes:Ie,classNames:a,className:D,styles:o,style:ae,attributes:oe,vars:O,varsResolver:Re,unstyled:te}),{dir:P}=re(),[ce,F]=(0,Y.useState)(!1),[I,L]=j({value:typeof s==`number`?t(s,d,f):s,defaultValue:typeof g==`number`?t(g,d,f):g,finalValue:t(0,d,f),onChange:c}),R=(0,Y.useRef)(I),z=(0,Y.useRef)(l);(0,Y.useEffect)(()=>{z.current=l},[l]);let B=(0,Y.useRef)(null),V=(0,Y.useRef)(null),[H,U]=p||[d,f],ue=Q({value:I,min:H,max:U}),W=ne(I),de=typeof y==`function`?y(W):y,G=h??je(m),{ref:fe,active:pe}=e((0,Y.useCallback)(({x:e})=>{if(!w){let n=t(ke({value:e,min:H,max:U,step:m,precision:G}),d,f);L(A&&v?.length?Se(n,v.map(e=>e.value)):n),R.current=n}},[w,d,f,H,U,m,G,L,v,A]),{onScrubEnd:(0,Y.useCallback)(()=>{if(!w&&z.current){let e=A&&v?.length?Se(R.current,v.map(e=>e.value)):R.current;z.current(e)}},[w,v,A])},P),K=(0,Y.useCallback)(e=>{!w&&z.current&&z.current(e)},[w]),me=e=>{if(!w)switch(e.key){case`ArrowUp`:{if(e.preventDefault(),V.current?.focus(),A&&v){let e=Me(I,v);L(e),K(e);break}let t=Ae(Math.min(Math.max(I+m,d),f),G);L(t),K(t);break}case`ArrowRight`:{if(e.preventDefault(),V.current?.focus(),A&&v){let e=P===`rtl`?Ne(I,v):Me(I,v);L(e),K(e);break}let t=Ae(Math.min(Math.max(P===`rtl`?I-m:I+m,d),f),G);L(t),K(t);break}case`ArrowDown`:{if(e.preventDefault(),V.current?.focus(),A&&v){let e=Ne(I,v);L(e),K(e);break}let t=Ae(Math.min(Math.max(I-m,d),f),G);L(t),K(t);break}case`ArrowLeft`:{if(e.preventDefault(),V.current?.focus(),A&&v){let e=P===`rtl`?Me(I,v):Ne(I,v);L(e),K(e);break}let t=Ae(Math.min(Math.max(P===`rtl`?I+m:I-m,d),f),G);L(t),K(t);break}case`Home`:if(e.preventDefault(),V.current?.focus(),A&&v){L(Pe(v)),K(Pe(v));break}L(d),K(d);break;case`End`:if(e.preventDefault(),V.current?.focus(),A&&v){L(Fe(v)),K(Fe(v));break}L(f),K(f);break}};return(0,X.jsx)(Ce,{value:{getStyles:se},children:(0,X.jsxs)(we,{...N,ref:E(r,B),onKeyDownCapture:me,onMouseDownCapture:()=>B.current?.focus(),size:u,disabled:w,children:[(0,X.jsx)(Oe,{inverted:ie,offset:0,filled:ue,marks:v,min:H,max:U,value:W,disabled:w,containerProps:{ref:fe,onMouseEnter:S?()=>F(!0):void 0,onMouseLeave:S?()=>F(!1):void 0},children:(0,X.jsx)(Te,{max:U,min:H,value:W,position:ue,dragging:pe,label:de,ref:V,labelTransitionProps:b,labelAlwaysOn:x,thumbLabel:ee,showLabelOnHover:S,isHovered:ce,disabled:w,...M,children:C})}),(0,X.jsx)(`input`,{type:`hidden`,name:_,value:W,...k})]})})});ze.classes=Ie,ze.displayName=`@mantine/core/Slider`;var Be=w(_()),Ve=w(C());const He=e=>{let{hints:t,onChangeHint:n,disabled:r,height:i,...a}=e,{t:o}=I(),s=t.map((e,t)=>({hint:e,key:t})),c=(e,t)=>{let r=[...s];r[e].hint=t,n(r.map(e=>e.hint))},l=()=>{n([...s,{hint:``,key:s.length}].map(e=>e.hint))},d=e=>{n(s.filter(t=>t.key!==e).map(e=>e.hint))};return(0,X.jsx)(p.Wrapper,{...a,children:(0,X.jsx)(ge,{offsetScrollbars:!0,scrollbarSize:4,h:i,children:(0,X.jsxs)(R,{gap:`xs`,children:[s.map(e=>(0,X.jsx)(u,{mr:4,value:e.hint,disabled:r,onChange:t=>c(e.key,t.target.value),rightSection:(0,X.jsx)(F,{onClick:()=>d(e.key),children:(0,X.jsx)(Ve.Icon,{path:W,size:1})})},e.key)),(0,X.jsx)(O,{mr:4,leftSection:(0,X.jsx)(Ve.Icon,{path:fe,size:1}),onClick:l,children:o(`admin.button.challenges.hint.add`)})]})})})};var Ue=w(C());const We=e=>{let{challenge:t,cateData:n,...a}=e,[o,s]=(0,Y.useState)({closeTime:null,instanceEntry:null,url:`/assets/attachment.zip`}),{t:c}=I(),[l,u]=i(``),[d,f]=(0,Y.useState)(0),p=()=>{s({...o,closeTime:(0,Be.default)().add(10,`m`).add(10,`s`).valueOf(),instanceEntry:`localhost:2333`})},m=()=>{s({...o,closeTime:null,instanceEntry:null})},h=()=>{s({...o,closeTime:(0,Be.default)(o.closeTime).add(10,`m`).valueOf(),instanceEntry:o.instanceEntry})},_=()=>{g({color:`teal`,title:c(`admin.notification.games.challenges.preview.flag_submitted`),message:l,icon:(0,X.jsx)(Ue.Icon,{path:k,size:1})}),u(``),f(d+1),t.limit&&d+1>=t.limit&&setTimeout(()=>{f(0)},1e3)},v=()=>{g({color:`teal`,message:c(`admin.notification.games.challenges.preview.attachment_downloaded`),icon:(0,X.jsx)(Ue.Icon,{path:k,size:1})})};return(0,X.jsx)(r,{...a,challenge:{...t,attempts:d,context:o},cateData:n,flag:l,setFlag:u,onCreate:p,onDestroy:m,onSubmitFlag:_,onExtend:h,onDownload:v})},Ge=({originalScore:e,difficulty:t,minScoreRate:n,currentAcceptCount:r})=>{let i=e=>e*6*t/100,a=r=>r<=1?e:Math.floor(e*(n+(1-n)*Math.exp((1-r)/t))),o=a(r),s=r>5.8*t?5.8*t:r,c=x(),l=[...Array(100).keys()].map(e=>[i(e),a(i(e))]),{colorScheme:u}=S(),{t:d}=I(),f=c.colors[c.primaryColor][u===`dark`?8:6];return(0,X.jsx)(J,{option:(0,Y.useMemo)(()=>({animation:!1,backgroundColor:`transparent`,grid:{top:30,left:40,right:70,bottom:30,backgroundColor:`transparent`},xAxis:{name:d(`admin.content.games.challenges.solve_count`)},yAxis:{name:d(`admin.content.games.challenges.score`),min:0,max:Math.ceil(e*1.2/100)*100},series:[{type:`line`,showSymbol:!1,clip:!0,color:f,data:l,markPoint:{label:{show:!0,fontSize:10,formatter:`{c}`},symbol:`pin`,symbolSize:40,symbolOffset:[0,0],data:[{name:d(`game.label.score`),value:o,xAxis:s,yAxis:o}]},markLine:{symbol:`none`,data:[{yAxis:Math.floor(e*n),label:{position:`end`,formatter:`min: {c}`}}]}}]}),[c,e,t,n,r]),opts:{renderer:`svg`},style:{width:`100%`,height:`100%`,display:`flex`}})};var $=w(C(),1),Ke=w(_(),1),qe=()=>{let e=G(),{id:t,chalId:r}=ce(),[i,h]=[parseInt(t??`-1`),parseInt(r??`-1`)],{game:_}=o(i),{challenge:v,mutate:x}=be(i,h),{challenges:S,mutate:C}=ye(i),[w,T]=(0,Y.useState)({...v}),[E,re]=(0,Y.useState)(v?.deadlineUtc?(0,Ke.default)(v?.deadlineUtc):null),[D,j]=(0,Y.useState)(!1),[P,F]=(0,Y.useState)((v?.minScoreRate??.25)*100),[L,le]=(0,Y.useState)(v?.category??ne.Misc),[z,H]=(0,Y.useState)(v?.type??q.StaticAttachment),[U,W]=(0,Y.useState)(0),[fe,me]=(0,Y.useState)(!1),he=ae(),ge=ie(),_e=K(),{t:J}=I();(0,Y.useEffect)(()=>{v&&(T({...v}),le(v.category),H(v.type),F((v?.minScoreRate??.25)*100),W(v.acceptedCount))},[v]);let Se=async(e,t)=>{if(e){j(!0);try{let n=await y.edit.editUpdateGameChallenge(i,h,{...e,deadlineUtc:E?E.valueOf():0,isEnabled:void 0});t||g({color:`teal`,message:J(`admin.notification.games.challenges.updated`),icon:(0,X.jsx)($.Icon,{path:k,size:1})}),x(n.data),C()}catch(e){N(e,J)}finally{t||j(!1)}}},Ce=async()=>{j(!0);try{await y.edit.editRemoveGameChallenge(i,h),g({color:`teal`,message:J(`admin.notification.games.challenges.deleted`),icon:(0,X.jsx)($.Icon,{path:k,size:1})}),C(S?.filter(e=>e.id!==h),{revalidate:!1}),e(`/admin/games/${t}/challenges`)}catch(e){N(e,J)}finally{j(!1)}},Z=async()=>{try{let e=await y.edit.editCreateTestContainer(i,h);g({color:`teal`,message:J(`admin.notification.games.instances.created`),icon:(0,X.jsx)($.Icon,{path:k,size:1})}),v&&x({...v,testContainer:e.data})}catch(e){N(e,J)}finally{j(!1)}},we=async()=>{try{await y.edit.editDestroyTestContainer(i,h),g({color:`teal`,message:J(`admin.notification.games.instances.deleted`),icon:(0,X.jsx)($.Icon,{path:k,size:1})}),v&&x({...v,testContainer:void 0})}catch(e){N(e,J)}finally{j(!1)}},Te=async()=>{v&&(j(!0),await Se({...w,category:L,minScoreRate:P/100},!0),v?.testContainer?await we():await Z())},Q=(e,t)=>e.find(e=>!!e)??t;return(0,X.jsxs)(xe,{isLoading:!v,contentPos:`space-between`,backUrl:`/admin/games/${t}/challenges`,head:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(te,{lineClamp:1,className:c.wordBreakAll,children:[`# `,w?.title]}),(0,X.jsxs)(B,{wrap:`nowrap`,justify:`right`,children:[(0,X.jsx)(O,{disabled:D,color:`red`,leftSection:(0,X.jsx)($.Icon,{path:pe,size:1}),variant:`outline`,onClick:()=>he.openConfirmModal({title:J(`admin.button.challenges.delete`),children:(0,X.jsx)(b,{size:`sm`,children:J(`admin.content.games.challenges.delete`,{name:w?.title})}),onConfirm:()=>Ce(),confirmProps:{color:`red`}}),children:J(`admin.button.challenges.delete`)}),(0,X.jsx)(O,{disabled:D,leftSection:(0,X.jsx)($.Icon,{path:V,size:1}),onClick:()=>me(!0),children:J(`admin.button.challenges.preview`)}),(0,X.jsx)(O,{disabled:D,component:oe,leftSection:(0,X.jsx)($.Icon,{path:f,size:1}),to:`/admin/games/${i}/challenges/${h}/flags`,children:J(`admin.button.challenges.edit_more`)}),(0,X.jsx)(O,{disabled:D,leftSection:(0,X.jsx)($.Icon,{path:A,size:1}),onClick:()=>Se({...w,category:L,minScoreRate:P/100}),children:J(`admin.button.save`)})]})]}),children:[(0,X.jsxs)(R,{children:[(0,X.jsxs)(s,{columns:3,children:[(0,X.jsx)(s.Col,{span:1,children:(0,X.jsx)(u,{label:J(`admin.content.games.challenges.title`),disabled:D,value:w.title??``,required:!0,onChange:e=>T({...w,title:e.target.value})})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsx)(a,{label:(0,X.jsxs)(B,{gap:`sm`,wrap:`nowrap`,children:[(0,X.jsx)(b,{size:`sm`,children:J(`admin.content.games.challenges.type.label`)}),(0,X.jsx)(b,{size:`xs`,c:`dimmed`,children:J(`admin.content.games.challenges.type.description`)})]}),placeholder:`Type`,value:z,disabled:D,readOnly:!0,renderOption:se,data:Object.entries(q).map(e=>{let t=ge.get(e[1]);return{value:e[1],label:t?.name,...t}})})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsx)(a,{required:!0,label:J(`admin.content.games.challenges.category`),placeholder:`Category`,value:L,disabled:D,onChange:e=>{le(e),T({...w,category:e})},renderOption:ue,data:de.map(e=>{let t=_e.get(e);return{value:e,label:t?.name,...t}})})}),(0,X.jsx)(s.Col,{span:2,children:(0,X.jsx)(ee,{w:`100%`,label:(0,X.jsxs)(B,{gap:`sm`,children:[(0,X.jsx)(b,{size:`sm`,children:J(`admin.content.games.challenges.description`)}),(0,X.jsx)(b,{size:`xs`,c:`dimmed`,children:J(`admin.content.markdown_support`)})]}),value:w?.content??``,autosize:!0,disabled:D,minRows:5,maxRows:5,onChange:e=>T({...w,content:e.target.value})})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsxs)(R,{gap:`0.425625rem`,children:[(0,X.jsx)(l,{label:J(`admin.content.games.challenges.submission_limit.label`),description:J(`admin.content.games.challenges.submission_limit.description`),placeholder:J(`admin.content.games.challenges.submission_limit.placeholder`),min:0,max:1e4,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w?.submissionLimit||void 0,onChange:e=>{let t=M(e);isNaN(t)||T({...w,submissionLimit:t})}}),(0,X.jsx)(d,{label:J(`admin.content.games.challenges.deadline.label`),placeholder:J(`admin.content.games.challenges.deadline.placeholder`),size:`sm`,value:E?.toDate(),valueFormat:`L LT`,disabled:D,clearable:!0,onChange:e=>{re(e?(0,Ke.default)(e):null)}})]})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsx)(R,{gap:`sm`,children:(0,X.jsx)(He,{label:(0,X.jsxs)(B,{gap:`sm`,children:[(0,X.jsx)(b,{size:`sm`,children:J(`admin.content.games.challenges.hints`)}),(0,X.jsx)(b,{size:`xs`,c:`dimmed`,children:J(`admin.content.markdown_inline_support`)})]}),hints:w?.hints??[],disabled:D,height:180,onChangeHint:e=>T({...w,hints:e})})})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsxs)(R,{h:`100%`,children:[(0,X.jsxs)(B,{wrap:`nowrap`,children:[(0,X.jsx)(l,{label:J(`admin.content.games.challenges.score`),min:0,required:!0,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w?.originalScore??500,onChange:e=>{let t=M(e);isNaN(t)||T({...w,originalScore:t})}}),(0,X.jsx)(l,{label:J(`admin.content.games.challenges.difficulty`),decimalScale:2,fixedDecimalScale:!0,step:.2,min:.1,required:!0,disabled:D,value:w?.difficulty??100,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),onChange:e=>{let t=M(e,!0);isNaN(t)||T({...w,difficulty:t})}})]}),(0,X.jsx)(p.Wrapper,{label:J(`admin.content.games.challenges.min_score_radio.label`),h:`3.8rem`,required:!0,children:(0,X.jsx)(ze,{label:e=>J(`admin.content.games.challenges.min_score_radio.description`,{min_score:(e/100*(w?.originalScore??500)).toFixed(0)}),disabled:D,value:P,marks:[{value:20,label:`20%`},{value:50,label:`50%`},{value:80,label:`80%`}],onChange:F,classNames:{label:c.challEditLabel}})}),(0,X.jsx)(m,{disabled:D,checked:!w?.disableBloodBonus,label:ve(J(`admin.content.games.challenges.blood_bonus.label`),J(`admin.content.games.challenges.blood_bonus.description`)),onChange:e=>T({...w,disableBloodBonus:!e.target.checked})})]})}),(0,X.jsx)(s.Col,{span:1,children:(0,X.jsx)(Ge,{currentAcceptCount:U,originalScore:w.originalScore??500,minScoreRate:P/100,difficulty:w.difficulty??30})})]}),z===q.DynamicAttachment&&(0,X.jsx)(u,{label:J(`admin.content.games.challenges.attachment_name.label`),description:J(`admin.content.games.challenges.attachment_name.description`),disabled:D,value:w.fileName??`attachment`,onChange:e=>T({...w,fileName:e.target.value})}),(z===q.StaticContainer||z===q.DynamicContainer)&&(0,X.jsxs)(s,{columns:12,children:[(0,X.jsx)(s.Col,{span:8,children:(0,X.jsxs)(B,{justify:`space-between`,align:`flex-end`,children:[(0,X.jsx)(u,{label:J(`admin.content.games.challenges.container_image`),disabled:D,value:w.containerImage??``,required:!0,onChange:e=>T({...w,containerImage:e.target.value}),classNames:{root:c.flexGrow}}),(0,X.jsx)(O,{miw:`8rem`,color:v?.testContainer?`orange`:`green`,disabled:D,onClick:Te,children:v?.testContainer?J(`admin.button.challenges.test_container.destroy`):J(`admin.button.challenges.test_container.create`)})]})}),(0,X.jsx)(s.Col,{span:4,children:(0,X.jsx)(n,{test:!0,label:`${v?.title} @ ${_?.title} (test)`,disabled:D,context:{closeTime:v?.testContainer?.expectStopAt,instanceEntry:v?.testContainer?.entry}})}),(0,X.jsx)(s.Col,{span:2,children:(0,X.jsx)(l,{label:J(`admin.content.games.challenges.service_port.label`),description:J(`admin.content.games.challenges.service_port.description`),min:1,max:65535,required:!0,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w.containerExposePort??1,onChange:e=>{let t=M(e);isNaN(t)||T({...w,containerExposePort:t})}})}),(0,X.jsx)(s.Col,{span:2,children:(0,X.jsx)(l,{label:J(`admin.content.games.challenges.cpu_limit.label`),description:J(`admin.content.games.challenges.cpu_limit.description`),min:1,max:1024,required:!0,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w.cpuCount??1,onChange:e=>{let t=M(e);isNaN(t)||T({...w,cpuCount:t})}})}),(0,X.jsx)(s.Col,{span:2,children:(0,X.jsx)(l,{label:J(`admin.content.games.challenges.memory_limit.label`),description:J(`admin.content.games.challenges.memory_limit.description`),min:32,max:1048576,required:!0,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w.memoryLimit??32,onChange:e=>{let t=M(e);isNaN(t)||T({...w,memoryLimit:t})}})}),(0,X.jsx)(s.Col,{span:2,children:(0,X.jsx)(l,{label:J(`admin.content.games.challenges.storage_limit.label`),description:J(`admin.content.games.challenges.storage_limit.description`),min:0,max:1048576,required:!0,disabled:D,stepHoldDelay:500,stepHoldInterval:e=>Math.max(1e3/e**2,25),value:w.storageLimit??32,onChange:e=>{let t=M(e);isNaN(t)||T({...w,storageLimit:t})}})}),(0,X.jsx)(s.Col,{span:4,display:`flex`,className:c.alignCenter,children:(0,X.jsx)(m,{disabled:D,checked:w.enableTrafficCapture??!1,label:ve(J(`admin.content.games.challenges.traffic_capture.label`),J(`admin.content.games.challenges.traffic_capture.description`)),onChange:e=>T({...w,enableTrafficCapture:e.target.checked})})})]})]}),(0,X.jsx)(We,{challenge:{title:Q([w?.title,v?.title],``),content:Q([w?.content,v?.content]),hints:Q([w?.hints,v?.hints],[]),score:Q([w?.originalScore,v?.originalScore],500),limit:Q([w?.submissionLimit,v?.submissionLimit],0),category:L,deadline:E?E.valueOf():void 0,type:v?.type??q.StaticAttachment},opened:fe,onClose:()=>me(!1),cateData:_e.get(w?.category??ne.Misc)})]})};export{qe as default};